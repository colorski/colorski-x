<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="renderer" content="webkit" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1"/>
<link rel="shortcut icon" href="images/favicon.ico"/>
<link rel="bookmark" href="images/favicon.ico"/>

<title>test-49-jquery-plugins-jquery.form</title>
<meta name="keywords" content="" />
<meta name="description" content="" />

<link rel="stylesheet" href="css/reset.css" />

<link type="text/css" rel="stylesheet" href="http://www.colorski.com/plugins/codeView/shCore.css"/>
<script type="text/javascript" src="http://www.colorski.com/plugins/codeView/shCore.js"></script>
<script type="text/javascript" src="http://www.colorski.com/plugins/codeView/shBrushJScript.js"></script>
<script type="text/javascript" src="http://www.colorski.com/plugins/codeView/shBrushCss.js"></script>
<script type="text/javascript" src="http://www.colorski.com/plugins/codeView/shBrushXml.js"></script>

<style></style>
</head>

<body>
<h1>jquery.form插件</h1>
<div class="topclor"><p class="tc_1"></p><p class="tc_4"></p><p class="tc_3"></p><p class="tc_2"></p><p class="tc_5"><p class="tc_1"></p><p class="tc_4"></p><p class="tc_3"></p><p class="tc_2"></p><p class="tc_5"></p></div>

<section class="code">
	<h5>可以满足的需求：</h5>
	通过该插件，我们可以非常简单的实现表单的异步提交，并实现文件上传、上传进度条显示等。
    <h5>需要的文件：</h5>
    <a href="js/plugins/jquery.form.js">jquery.form.js</a>
    <h5>用法：</h5>
    html：
    <pre  class="brush:html;">
    		<!-- <form action="upload.php" method="post" enctype="multipart/form-data">
    					    <input type="file" name="myfile" /><br>
    					    <input type="submit" value="Upload File to Server" />
    					</form>
    			
    					<div class="progress">
    					    <div class="bar"></div >
    					    <div class="percent">0%</div >
    					</div>
    			
    					<div id="status"></div> -->
    </pre>
    css:
    <pre class="brush:css;">
    	.progress { position:relative; width:400px; border: 1px solid #ddd; padding: 1px; border-radius: 3px; }
        .bar { background-color: #B4F5B4; width:0%; height:20px; border-radius: 3px; }
        .percent { position:absolute; display:inline-block; top:3px; left:48%; }
    </pre>
    javascript:
    <pre  class="brush:javascript;">
    	$(function(){
	        var bar = $('.bar');
	        var percent = $('.percent');
	        var status = $('#status');
	        $('form').ajaxForm({
	            beforeSerialize:function(){
	                //console.log("表单数据序列化前执行的操作！");
	                //$("#txt2").val("java");//如：改变元素的值
	            },
	            beforeSubmit:function(){
	                //console.log("表单提交前的操作");
	                var filesize = $("input[type='file']")[0].files[0].size/1024/1024;
	                if(filesize > 50){
	                    alert("文件大小超过限制，最多50M");
	                    return false;
	                }
	                //if($("#txt1").val()==""){return false;}//如：验证表单数据是否为空
	            },
	            beforeSend: function() {
	                status.empty();
	                var percentVal = '0%';
	                bar.width(percentVal)
	                percent.html(percentVal);
	            },
	            uploadProgress: function(event, position, total, percentComplete) {//上传的过程
	                //position 已上传了多少
	                //total 总大小
	                //已上传的百分数
	                var percentVal = percentComplete + '%';
	                bar.width(percentVal)
	                percent.html(percentVal);
	                //console.log(percentVal, position, total);
	            },
	            success: function(data) {
	            	//成功
	                var percentVal = '100%';
	                bar.width(percentVal)
	                percent.html(percentVal);
	                console.log(data);
	            },
	            error:function(err){
	            	//失败
	                console.log("表单提交异常！"+err.msg);
	            },
	            complete: function(xhr) {//完成
	                status.html(xhr.responseText);
	            }
	        });
	    });

    </pre>

<hr />

<p>具体实例解释：<a href="http://blog.csdn.net/qq_28602957/article/details/53612885">点这里</a></p>
<p>每一步具体原理解释：<a href="http://www.cnblogs.com/heyuquan/p/form-plug-async-submit.html">点这里</a></p>
<p>官方API：<a href="http://jquery.malsup.com/form/#getting-started">点这里</a></p>

</section>

<!--colorBorder-->
<div class="topclor"><p class="tc_1"></p><p class="tc_4"></p><p class="tc_3"></p><p class="tc_2"></p><p class="tc_5"><p class="tc_1"></p><p class="tc_4"></p><p class="tc_3"></p><p class="tc_2"></p><p class="tc_5"></p>
</div>


<script src="js/jquery-1.12.3.min.js"></script>

<script>

</script>
</body>
</html>